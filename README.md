# newLogin
中国XX大学融合门户登录。

写在前面：
            
            - 代码仅供参考,请不要拿来恶意爬取融合门户网站。
            - 学校更新系统以后终于有了风控管理(doge),所以你的异常行为会触发服务熔断,甚至会被加入黑名单(会封VPN)。
            - 请不要再搞爬虫了,爬取学生信息是违法行为(doge)
            - 更新于2021/3/17
           

本项目实现了新版统一登录认证页面的登录和一系列操作  
具体有:  
 + 登录操作
 + 教务系统的登录及相关的一系列操作
 + 简单查询校园卡余额
 + 简单查询图书借阅信息
 + 简单查询校园卡流水
 + 按照时间查询校园卡流水
 + 校园卡充值
 + 图书馆jwt获取
 + 图书馆当前借阅信息
 + 图书馆历史借阅信息
 + 图书馆收藏信息
 <h4>请在内网环境下使用</h4>
 把学号和密码换成自己的  
 
 使用方法：
 
           pip install bs4
           pip install pyexecjs -i https://pypi.tuna.tsinghua.edu.cn/simple
           python login.py
 
 还有很多方法没有实现，但是只要拿到了cookie，剩下的都不是什么问题~~主要是我懒的再写了~~。
 
 目前只是能用,如果你想更好的使用，请不要使用request.session方法,并将class拆分，cookie可以用redis存一下(请注意过期时间，以及如何验证过期)。json数据还是处理一下比较好

 如果只是想简单的使用，请看着整(最基础的爬虫，就是加密部分有一点麻烦)
 
 我做了一个[session持久化中心](https://github.com/boopo/session-persistence)，里面有一些方法可以参考
 
 最近发现除了教务系统和一卡通需要内网访问，其他的都可以直接在公网访问，所以可以把代码打包部署到serverless  serverless版不再放出~~写的太烂了~~<br>
 
 ps: 在docker里跑有一点问题，现在解决了，代码耦合度过高，链式调用导致响应超时
 解决方式：
  + 多线程
  + 异步调用
  + 懒加载
  
 如果你有更好的实现，请直接 pull request(bushi)，~~请直接来图书馆8楼喝茶吧~~
 
 你都看到最后了，还不来个Star？
 
 
